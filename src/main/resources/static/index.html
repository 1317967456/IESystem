<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>公司信息管理</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
  <h1>公司信息管理</h1>
  <!-- 公司信息表格 -->
  <table id="enterprise-table" class="table">
    <thead>
    <tr>
      <th>公司编号</th>
      <th>公司名称</th>
      <th>公司代表人</th>
      <th>公司地址</th>
      <th>联系方式</th>
      <th>电子邮件</th>
      <th>经营范围</th>
      <th>操作</th>
      <th><input type="checkbox" id="selectAll">全选</th>
    </tr>
    </thead>
    <tbody>
    <script>
      $(document).ready(function() {
        // 全选/取消全选
        $("#selectAll").click(function() {
          $(".select-row").prop("checked", $(this).prop("checked"));
        });
        $.ajax({
          url: "/enterprise/list",
          type: "GET",
          dataType: "json",
          success: function(data) {
            var tableRows = "";
            $.each(data, function(index, enterprise) {
              tableRows += "<tr>";
              tableRows += "<td>" + enterprise.enterprise_id + "</td>";
              tableRows += "<td>" + enterprise.enterprise_name + "</td>";
              tableRows += "<td>" + enterprise.contact_person + "</td>";
              tableRows += "<td>" + enterprise.address + "</td>";
              tableRows += "<td>" + enterprise.phone_number + "</td>";
              tableRows += "<td>" + enterprise.email + "</td>";
              tableRows += "<td>" + enterprise.business_type + "</td>";
              tableRows += "<td>" +
                      "<button class='btn btn-danger' onclick='deleteEnterprise(" + enterprise.enterprise_id + ")'>删除</button> " +
                      "<button class='btn btn-primary' onclick='editEnterprise(" + enterprise.enterprise_id + ")'>编辑</button>" +
                      "</td>";
              tableRows += "<td><input type='checkbox' class='select-row' data-id='" + enterprise.enterprise_id + "'></td>";
              tableRows += "</tr>";
            });
            $("table tbody").html(tableRows);
          },
          error: function(jqXHR, textStatus, errorThrown) {
            console.log("Error: " + textStatus + " - " + errorThrown);
          }
        });
      });
    </script>
    </tbody>
  </table>
</div>